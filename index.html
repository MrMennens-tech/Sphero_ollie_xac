<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollie Web Controller</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
</head>
<body class="bg-slate-900 text-white font-sans flex flex-col min-h-screen">

    <header class="bg-slate-100 shadow-md p-4">
        <div class="container mx-auto flex justify-between items-center">
            <img src="img/logo_ms.png" alt="Logo Mytylschool" class="h-16">
            <h1 class="text-2xl sm:text-4xl font-bold text-slate-800 text-center">Ollie Web Controller</h1>
            <img src="img/logo_mt.png" alt="Logo Mennens.tech" class="h-16">
        </div>
    </header>

    <main class="container mx-auto p-4 flex-grow grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Left Column: Connection & Status -->
        <div class="lg:col-span-1 bg-slate-800/50 rounded-2xl p-6 shadow-2xl flex flex-col gap-6 h-fit">
            <div id="connection-panel">
                <button id="connect-button" class="w-full text-center p-3 rounded-lg font-bold text-2xl py-4 transition-all transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 shadow-lg bg-teal-500 hover:bg-teal-600 text-slate-900">
                    Verbind met Ollie
                </button>
            </div>
            <div class="space-y-4">
                <div id="ollie-status-container" class="status-box">
                    <span id="ollie-status-dot" class="status-dot disconnected"></span>
                    <p id="ollie-status">Ollie: Niet verbonden</p>
                </div>
                <div id="gamepad-status-container" class="status-box">
                    <span id="gamepad-status-dot" class="status-dot disconnected"></span>
                    <p id="gamepad-status">Gamepad: Niet verbonden</p>
                </div>
            </div>
            <button id="emergency-stop-button" class="hidden w-full text-center p-3 rounded-lg font-bold text-xl transition-all transform hover:scale-105 bg-red-600 hover:bg-red-500 text-white shadow-lg animate-pulse">
                NOODSTOP
            </button>
        </div>

        <!-- Middle Column: Main Controls -->
        <div id="controls-panel" class="lg:col-span-1 bg-slate-800/50 rounded-2xl p-6 shadow-2xl flex flex-col items-center justify-center gap-4">
             <div class="flex items-center justify-center space-x-3 mb-4">
                <label for="toggle-touch-checkbox" class="font-medium text-slate-300">Touch Modus</label>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="toggle-touch-checkbox" class="sr-only peer">
                    <div class="w-11 h-6 bg-slate-700 rounded-full peer peer-focus:ring-4 peer-focus:ring-teal-800 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                </label>
            </div>
            <div id="touch-controls" class="hidden w-full h-full flex flex-col items-center justify-center gap-4">
                <div class="grid grid-cols-2 gap-4 w-full">
                     <button data-action="speed-up" class="btn-touch">Snelheid +</button>
                     <button data-action="speed-down" class="btn-touch">Snelheid -</button>
                </div>
                <button data-action="cycle-mode" class="btn-touch w-full">Wissel Modus</button>
                 <button id="touch-aim" class="btn-touch w-full">Richten (3s inhouden)</button>
                <div id="touch-tricks" class="hidden grid-cols-2 gap-4 w-full">
                    <button data-trick="spinLeft" class="btn-touch">Spin Links</button>
                    <button data-trick="spinRight" class="btn-touch">Spin Rechts</button>
                    <button data-trick="flipForward" class="btn-touch">Flip Vooruit</button>
                    <button data-trick="flipBackward" class="btn-touch">Flip Achteruit</button>
                </div>
            </div>
        </div>

        <!-- Right Column: Settings & Info -->
        <div class="lg:col-span-1 bg-slate-800/50 rounded-2xl p-6 shadow-2xl flex flex-col gap-6 h-fit">
            <div id="info-panel" class="space-y-4">
                 <div id="mode-indicator" class="w-full text-center p-3 rounded-lg font-medium text-lg shadow-lg bg-slate-800">Modus: Normaal</div>
                 <div id="speed-indicator" class="w-full text-center p-3 rounded-lg font-medium text-lg shadow-lg bg-slate-800">Max Snelheid: 20%</div>
            </div>
             <div id="settings-panel" class="space-y-4">
                <button id="open-config-button" class="btn-secondary w-full">Stel Controller In</button>
            </div>
        </div>

    </main>

    <!-- Config Modal -->
    <div id="config-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50">
        <div class="bg-slate-800 rounded-2xl p-8 shadow-2xl w-full max-w-md mx-4 space-y-6">
            <h2 class="text-2xl font-bold text-center text-teal-400">Controller Instellen</h2>
            <p id="config-instructions" class="text-center text-slate-400">Kies een actie en druk de gewenste knop in je controller.</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <button data-action="SPEED_UP" id="map-SPEED_UP" class="btn-config">Snelheid + (B4)</button>
                <button data-action="SPEED_DOWN" id="map-SPEED_DOWN" class="btn-config">Snelheid - (B6)</button>
                <button data-action="COLOR_X1" id="map-COLOR_X1" class="btn-config">Kleur X1 (B2)</button>
                <button data-action="COLOR_X2_AIM" id="map-COLOR_X2_AIM" class="btn-config">Kleur X2 / Richten (B3)</button>
                <button data-action="COLOR_X3" id="map-COLOR_X3" class="btn-config">Kleur X3 (B0)</button>
                <button data-action="COLOR_X4" id="map-COLOR_X4" class="btn-config">Kleur X4 (B1)</button>
                <button data-action="CYCLE_MODE" id="map-CYCLE_MODE" class="btn-config">Wissel Modus (B10)</button>
            </div>
             <div>
                <label for="deadzone-slider" class="block text-center text-slate-400 mb-2">Joystick Gevoeligheid</label>
                <input id="deadzone-slider" type="range" min="0.1" max="0.8" step="0.05" value="0.4" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer">
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 items-center">
                 <label for="color-x1" class="text-center">X1 (A)</label><input type="color" id="color-x1" value="#ff0000" class="w-full h-10 rounded-lg">
                 <label for="color-x2" class="text-center">X2 (B)</label><input type="color" id="color-x2" value="#0000ff" class="w-full h-10 rounded-lg">
                 <label for="color-x3" class="text-center">X3 (X)</label><input type="color" id="color-x3" value="#00ff00" class="w-full h-10 rounded-lg">
                 <label for="color-x4" class="text-center">X4 (Y)</label><input type="color" id="color-x4" value="#ffff00" class="w-full h-10 rounded-lg">
            </div>
            <button id="close-config-button" class="btn-secondary w-full">Sluiten</button>
        </div>
    </div>

    <script src="js/ollie.js" type="module"></script>
    <script src="js/main.js" type="module"></script>
</body>
</html>

